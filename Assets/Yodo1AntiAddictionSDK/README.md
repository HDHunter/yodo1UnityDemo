# Yodo1 Anti-Addiction SDK for Unity3d

An independent SDK for game developers implement `Anti-Addiction` function easily.
Face to the Chinese mobile game marks.

Version: 2.0.2-beta

  
## Usage

### Structures

* You can find sample scene and script in the `Assets/Yodo1AntiAddictionSDK/Sample` folder.
* At the beginning, when you have import the unitypackage into your project, we recommend that you fill in the appkey of the game immediately.
* You can also fix it later by touch the file in `Assets/Yodo1AntiAddictionSDK/User/Resources/Yodo1U3dSettings.asset`

### Implements

* Just write the code in the script `Awake` phase.

#### Initiallize
```
/// <summary>
/// Return initialization result callback(返回初始化结果回调).
/// </summary>
/// <param name="result">
///    <see value="true">Initialization successful(初始化成功).</see>
///    <see value="false">Initialization failed(初始化失败).</see>
/// </param>
/// <param name="content">Information content when initialization fails(初始化失败时的信息内容).</param>
public delegate void InitDelegate(bool result, string content);

/// <summary>
/// Set SDK initialization callback(设置sdk初始化回调).
/// </summary>
/// <param name="initCallBack">Initialize result callback(初始化结果回调).</param>
Yodo1U3dAntiAddiction.SetInitCallBack((bool result, string content) =>
{
	Debug.LogFormat("result = {0}, content = {1}", result, content);
});
```

#### Play time limitation
```
/// <summary>
/// Callback triggered when the game is notified of the remaining time(对游戏进行剩余时间通知时触发的回调).
/// </summary>
/// <param name="eventAction"> 
///    <see value="ResumeGame">Continue game(继续游戏).</see>
///    <see value="ResumeGame">End game(结束游戏).</see>
/// </param> 
/// <param name="eventCode">
///    <see value="11001">Notification of playing time - minors(对于已玩时间的通知-未成年人).</see>
///    <see value="12001">Notice of no play period - minors(对于禁玩时段的通知-未成年人).</see>
///    <see value="11011">Notification of played time - visitors(对于已玩时间的通知-游客).</see>
///    <see value="12011">Notice of no play period - visitors(对于禁玩时段的通知-游客).</see>
///    <see value="50005">Events generated by third party channel SDK(第三方渠道SDK产生的事件).</see>
/// </param>
/// <param name="title">Notice title of game display(游戏展示的通知标题).</param>
/// <param name="content">Notice content of game display(游戏展示的通知内容).</param>
public delegate void TimeLimitNotifyDelegate(Yodo1U3dEventAction eventAction, int eventCode, string title, string content);


/// <summary>
/// Set remaining time notification callback(设置剩余时间通知回调).
/// </summary>
/// <param name="timeLimitNotifyCallBack">Remaining time notification callback(剩余时间通知回调).</param>
Yodo1U3dAntiAddiction.SetTimeLimitNotifyCallBack((Yodo1U3dEventAction action, string title, string content) =>
{
	Debug.LogFormat("action = {0}, title = {1}, content = {2}", action, title, content);
	if(action == Yodo1U3dEventAction.ResumeGame)
    {
        // Prompt when 10 minutes remain(剩余10分钟时提示).
    }
    else if (action == Yodo1U3dEventAction.EndGame)
    {
        // The game handles the pop-up prompt to exit the game(游戏处理退出游戏的弹框提示).
    }
});
```

#### Payment limitation
```
/// <summary>
/// Whether the callback of consumption has been restricted(是否已限制消费的回调).
/// </summary>
/// <param name="isAllow">
///    <see value="true">Available for purchase(可购买).</see>
///    <see value="false">Not available for purchase(不可购买).</see>
/// </param>
/// <param name="content">Notice content that needs to be displayed in the game when it is not available for purchase(不可购买时的需要游戏展示的通知内容).</param>
public delegate void VerifyPurchaseDelegate(bool isAllow, string content);

/// <summary>
/// 商品价格单位为分时请使用此接口
/// Verify consumption is restricted(验证是否已限制消费).
/// </summary>
/// </summary>
/// <param name="priceCent">The price of the commodity, in yuan(商品的价格，单位为分).</param>
/// <param name="currency">Corresponding currency symbol(对应货币符号,商品信息里获得).</param>
Yodo1U3dAntiAddiction.VerifyPurchase(priceCent, currency,  (bool isAllow, string context) => {
	Debug.LogFormat("isAllow = {0}, context = {1}", isAllow, context);
	if (isAllow)
	{
		//Can buy, execute purchase process(可购买，执行购买流程).
	}
	else {
        //Can't buy prompt player(不可以购买并提示玩家,).
	}
});

/// <summary>
/// 商品价格单位为元时请使用此接口
/// Verify consumption is restricted(验证是否已限制消费).
/// </summary>
/// <param name="priceYuan">The price of the commodity, in yuan(商品的价格，单位为元).</param>
/// <param name="currency">Corresponding currency symbol(对应货币符号,商品信息里获得).</param>
Yodo1U3dAntiAddiction.VerifyPurchaseYuan(priceYuan, currency, (bool isAllow, string context) => {
	Debug.LogFormat("isAllow = {0}, context = {1}", isAllow, context);
	if (isAllow)
	{
		//Can buy, execute purchase process(可购买，执行购买流程).
	}
	else {
        //Can't buy prompt player(不可以购买并提示玩家,).
	}
})
```

```
/// <summary>
/// 商品价格单位为分时请使用此接口
/// Report consumption information(上报消费信息).
/// </summary>
/// <param name="productId">Product id(消费产品id).</param>
/// <param name="productType">Product type(消费产品类型).</param>
/// <param name="price">Product price(消费产品价格，单位为分).</param>
/// <param name="currency">Product currency(对应货币类型,商品信息里获得).</param>
/// <param name="orderId">Store order number(商店订单号).</param>
Yodo1U3dAntiAddiction.ReportProductReceipt(productId, productType, price, currency, orderId);

/// <summary>
/// 商品价格单位为元时请使用此接口
/// Report consumption information(上报消费信息).
/// </summary>
/// <param name="productId">Product id(消费产品id).</param>
/// <param name="productType">Product type(消费产品类型).</param>
/// <param name="priceYuan">Product price(消费产品价格，单位为元).</param>
/// <param name="currency">Product currency(对应货币类型).</param>
/// <param name="orderId">Store order number(商店订单号).</param>
Yodo1U3dAntiAddiction.ReportProductReceiptYuan(productId, productType, priceYuan, currency, orderId);
```


#### Certification
```
/// <summary>
/// Real name callback(实名回调).
/// </summary>
/// <param name="eventAction">
///    <see value="ResumeGame">Continue game(继续游戏).</see>
///    <see value="ResumeGame">End game(结束游戏).</see>
/// </param>
public delegate void VerifyCertificationDelegate(Yodo1U3dEventAction eventAction);


/// <summary>
/// Real name authentication(实名认证).
/// </summary>
/// <param name="accountId">Account id(用户ID).</param>
/// <param name="verifyCertificationCallBack">Real name authentication callback(实名认证回调).</param>
Yodo1U3dAntiAddiction.VerifyCertificationInfo(accountId, (Yodo1U3dEventAction action) => {
	Debug.LogFormat("action = {0}", action);
	bool isGuestUser = false;
	if (eventAction == Yodo1U3dEventAction.ResumeGame)
    {
        //Both successful real name authentication and Guest can continue to play(实名认证成功和游客都可以继续游戏).


        //Check whether it is a Guest(查询是否是试玩).
        isGuestUser = Yodo1U3dAntiAddiction.IsGuestUser();
        Debug.LogFormat("IsGuestUser = {0}", Yodo1U3dAntiAddiction.IsGuestUser());
    }
    else if(eventAction == Yodo1U3dEventAction.EndGame)
    {
                //Real name authentication failure prompt and exit the game(实名认证失败提示并退出游戏).
 
    }
});
```

```
/// <summary>
/// Gets whether the current user is a guest user(获取当前用户是否为试玩).
/// </summary>
/// <returns>
///    <see value="true">Guest users(试玩).</see>
///    <see value="false">Non guest users(不是试玩).</see>
/// </returns>
bool isGuestUser = Yodo1U3dAntiAddiction.IsGuestUser();

```
### Others

TBD
        
        
